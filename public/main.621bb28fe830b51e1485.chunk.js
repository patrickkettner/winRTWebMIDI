!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){
/**
 * An implementation of the standard DOMException and DOMError interfaces
 *
 * @module w3c-domcore-errors
 * @see http://www.w3.org/TR/dom/#errors
 * @see http://dom.spec.whatwg.org/#errors
 *
 * @author Alexandre Morgaut (http://github.com/AMorgaut)
 * @license MIT
 **/
var n,o;function r(e,t){var o;o=n[e]||{},this.name=e||this.name||"DOMError",this.code=o.code||0,this.message=t||this.message||o.message||this.name}function i(e){var t;t=n[e]||{},this.code=t.code||0,this.message=t.message||e,this.name=e}i.prototype=Object.create(Error.prototype),n={IndexSizeError:{message:"The index is not in the allowed range",constantName:"INDEX_SIZE_ERR",code:1},HierarchyRequestError:{message:"The operation would yield an incorrect node tree.",constantName:"HIERARCHY_REQUEST_ERR",code:3},WrongDocumentError:{message:"The object is in the wrong document.",constantName:"WRONG_DOCUMENT_ERR",code:4},InvalidCharacterError:{message:"The string contains invalid characters.",constantName:"INVALID_CHARACTER_ERR",code:5},NoModificationAllowedError:{message:"The object can not be modified.",constantName:"NO_MODIFICATION_ALLOWED_ERR",code:7},NotFoundError:{message:"The object can not be found here.",constantName:"NOT_FOUND_ERR",code:8},NotSupportedError:{message:"The operation is not supported.",constantName:"NOT_SUPPORTED_ERR",code:9},InvalidStateError:{message:"The object is in an invalid state.",constantName:"INVALID_STATE_ERR",code:11},SyntaxError:{message:"The string did not match the expected pattern",constantName:"SYNTAX_ERR",code:12},InvalidModificationError:{message:"The object can not be modified in this way",constantName:"INVALID_MODIFICATION_ERR",code:13},NamespaceError:{message:"The operation is not allowed by Namespaces in XML.",constantName:"NAMESPACE_ERR",code:14},InvalidAccessError:{message:"The object does not support the operation or argument.",constantName:"INVALID_ACCESS_ERR",code:15},SecurityError:{message:"The operation is insecure.",constantName:"SECURITY_ERR",code:18},NetworkError:{message:"A network error occurred.",constantName:"NETWORK_ERR",code:19},AbortError:{message:"The operation was aborted.",constantName:"ABORT_ERR",code:20},URLMismatchError:{message:"The given URL does not match another URL.",constantName:"URL_MISMATCH_ERR",code:21},QuotaExceededError:{message:"The quota has been exceeded.",constantName:"QUOTA_EXCEEDED_ERR",code:22},TimeoutError:{message:"The operation timed out.",constantName:"TIMEOUT_ERR",code:23},InvalidNodeTypeError:{message:"The supplied node is incorrect or has an incorrect ancestor for this operation.",constantName:"INVALID_NODE_TYPE_ERR",code:24},DataCloneError:{message:"The object can not be cloned.",constantName:"DATA_CLONE_ERR",code:25},EncodingError:{message:"The encoding operation (either encoded or decoding) failed."}},o={},["","INDEX_SIZE_ERR","DOMSTRING_SIZE_ERR","HIERARCHY_REQUEST_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR","NO_DATA_ALLOWED_ERR","NO_MODIFICATION_ALLOWED_ERR","NOT_FOUND_ERR","NOT_SUPPORTED_ERR","INUSE_ATTRIBUTE_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR","VALIDATION_ERR","TYPE_MISMATCH_ERR","SECURITY_ERR","NETWORK_ERR","ABORT_ERR","URL_MISMATCH_ERR","QUOTA_EXCEEDED_ERR","TIMEOUT_ERR","INVALID_NODE_TYPE_ERR","DATA_CLONE_ERR"].forEach(function(e,t){var n;n={writable:!1,enumerable:!0,configurable:!1,value:t},o[e]=n}),Object.defineProperties(i,o),Object.defineProperties(i.prototype,o),t.DOMException=i,t.DOMError=r,t.Polyfill=function(){this.hasOwnProperty("DOMException")||(this.DOMException=i),this.hasOwnProperty("DOMError")||(this.DOMError=r)}},function(e,t,n){"use strict";n.r(t);const o=new WeakMap,r=new WeakMap;function i(e){const t=o.get(e);return console.assert(null!=t,"'this' is expected an Event object, but got",e),t}function s(e,t){o.set(this,{eventTarget:e,event:t,eventPhase:2,currentTarget:e,canceled:!1,stopped:!1,passiveListener:null,timeStamp:t.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});const n=Object.keys(t);for(let e=0;e<n.length;++e){const t=n[e];t in this||Object.defineProperty(this,t,a(t))}}function a(e){return{get(){return i(this).event[e]},set(t){i(this).event[e]=t},configurable:!0,enumerable:!0}}function c(e){return{value(){const t=i(this).event;return t[e].apply(t,arguments)},configurable:!0,enumerable:!0}}function l(e){if(null==e||e===Object.prototype)return s;let t=r.get(e);return null==t&&(t=function(e,t){const n=Object.keys(t);if(0===n.length)return e;function o(t,n){e.call(this,t,n)}o.prototype=Object.create(e.prototype,{constructor:{value:o,configurable:!0,writable:!0}});for(let r=0;r<n.length;++r){const i=n[r];if(!(i in e.prototype)){const e="function"==typeof Object.getOwnPropertyDescriptor(t,i).value;Object.defineProperty(o.prototype,i,e?c(i):a(i))}}return o}(l(Object.getPrototypeOf(e)),e),r.set(e,t)),t}function u(e){return i(e).stopped}function p(e,t){i(e).passiveListener=t}s.prototype={get type(){return i(this).event.type},get target(){return i(this).eventTarget},get currentTarget(){return i(this).currentTarget},composedPath(){const e=i(this).currentTarget;return null==e?[]:[e]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return i(this).eventPhase},stopPropagation(){const e=i(this);"function"==typeof e.event.stopPropagation&&e.event.stopPropagation()},stopImmediatePropagation(){const e=i(this);e.stopped=!0,"function"==typeof e.event.stopImmediatePropagation&&e.event.stopImmediatePropagation()},get bubbles(){return Boolean(i(this).event.bubbles)},get cancelable(){return Boolean(i(this).event.cancelable)},preventDefault(){const e=i(this);null==e.passiveListener?e.event.cancelable&&(e.canceled=!0,"function"==typeof e.event.preventDefault&&e.event.preventDefault()):console.warn("Event#preventDefault() was called from a passive listener:",e.passiveListener)},get defaultPrevented(){return i(this).canceled},get composed(){return Boolean(i(this).event.composed)},get timeStamp(){return i(this).timeStamp}},Object.defineProperty(s.prototype,"constructor",{value:s,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.Event&&(Object.setPrototypeOf(s.prototype,window.Event.prototype),r.set(window.Event.prototype,s));const d=new WeakMap,f=3;function E(e){return null!==e&&"object"==typeof e}function m(e){const t=d.get(e);if(null==t)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return t}function g(e,t){Object.defineProperty(e,`on${t}`,function(e){return{get(){let t=m(this).get(e);for(;null!=t;){if(t.listenerType===f)return t.listener;t=t.next}return null},set(t){"function"==typeof t||E(t)||(t=null);const n=m(this);let o=null,r=n.get(e);for(;null!=r;)r.listenerType===f?null!==o?o.next=r.next:null!==r.next?n.set(e,r.next):n.delete(e):o=r,r=r.next;if(null!==t){const r={listener:t,listenerType:f,passive:!1,once:!1,next:null};null===o?n.set(e,r):o.next=r}},configurable:!0,enumerable:!0}}(t))}function v(e){function t(){h.call(this)}t.prototype=Object.create(h.prototype,{constructor:{value:t,configurable:!0,writable:!0}});for(let n=0;n<e.length;++n)g(t.prototype,e[n]);return t}function h(){if(!(this instanceof h)){if(1===arguments.length&&Array.isArray(arguments[0]))return v(arguments[0]);if(arguments.length>0){const e=new Array(arguments.length);for(let t=0;t<arguments.length;++t)e[t]=arguments[t];return v(e)}throw new TypeError("Cannot call a class as a function")}d.set(this,new Map)}h.prototype={addEventListener(e,t,n){if(null==t)return!1;if("function"!=typeof t&&!E(t))throw new TypeError("'listener' should be a function or an object.");const o=m(this),r=E(n),i=(r?Boolean(n.capture):Boolean(n))?1:2,s={listener:t,listenerType:i,passive:r&&Boolean(n.passive),once:r&&Boolean(n.once),next:null};let a=o.get(e);if(void 0===a)return o.set(e,s),!0;let c=null;for(;null!=a;){if(a.listener===t&&a.listenerType===i)return!1;c=a,a=a.next}return c.next=s,!0},removeEventListener(e,t,n){if(null==t)return!1;const o=m(this),r=(E(n)?Boolean(n.capture):Boolean(n))?1:2;let i=null,s=o.get(e);for(;null!=s;){if(s.listener===t&&s.listenerType===r)return null!==i?i.next=s.next:null!==s.next?o.set(e,s.next):o.delete(e),!0;i=s,s=s.next}return!1},dispatchEvent(e){if(null==e||"string"!=typeof e.type)throw new TypeError('"event.type" should be a string.');const t=m(this),n=e.type;let o=t.get(n);if(null==o)return!0;const r=function(e,t){return new(l(Object.getPrototypeOf(t)))(e,t)}(this,e);let s=null;for(;null!=o;){if(o.once?null!==s?s.next=o.next:null!==o.next?t.set(n,o.next):t.delete(n):s=o,p(r,o.passive?o.listener:null),"function"==typeof o.listener)try{o.listener.call(this,r)}catch(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}else o.listenerType!==f&&"function"==typeof o.listener.handleEvent&&o.listener.handleEvent(r);if(u(r))break;o=o.next}return p(r,null),function(e,t){i(e).eventPhase=t}(r,0),function(e,t){i(e).currentTarget=t}(r,null),!r.defaultPrevented}},Object.defineProperty(h.prototype,"constructor",{value:h,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.EventTarget&&Object.setPrototypeOf(h.prototype,window.EventTarget.prototype);class y extends Event{constructor(e=throwIfMissing(),t,n={}){super(e,t),this[Symbol.toStringTag]="MIDIConnectionEvent",Object.defineProperty(this,"port",{value:n})}}let b="504BE32C-CCF6-4D2C-B73F-6F8B3747E22B";class w extends h{constructor(e){super(),Object.defineProperties(this,{id:{value:e.id,enumerable:!0},manufacturer:{value:"",enumerable:!0},name:{value:e.name,enumerable:!0},type:{value:e.id.toUpperCase().includes(b)?"input":"output",enumerable:!0},version:{value:"",enumerable:!0},state:{value:"connected",enumerable:!0},connection:{value:"disconnected",enumerable:!0,writable:!0},open:{enumerable:!0,value:function(e){function t(){return new Promise((n,o)=>{let r=e;if("open"===r.connection)return t(n,r);if("pending"===r.connection)return t(n,r);if("disconnected"!==r.connection){r.connection="pending";let e=new y("statechange",{},r);r.dispatchEvent(e)}r.connection="open";let i=new y("statechange",{},r);r.dispatchEvent(i),t(n,r)});function t(e,t){e(t)}}return Object.defineProperty(t,"toString",{value:"function open() { [native code] }",enumerable:!0}),t}(this)},close:{enumerable:!0,value:function(e){function t(){return new Promise((t,n)=>{let o=e;if("closed"===o.connection)return t(o);"input"!==o.type&&o.connection,o.connection="closed";let r=new y("statechange",{},o);o.dispatchEvent(r),t(o)})}return Object.defineProperty(t,"toString",{value:"function close() { [native code] }"}),t}(this)}})}}g(w.prototype,"statechange");class I extends w{constructor(e){super(e)}}g(I.prototype,"midimessage");class R extends Event{constructor(e,t,n={}){super("MIDIMessageEvent",t),this[Symbol.toStringTag]="MIDIMessageEvent",Object.defineProperties(this,{data:{enumerable:!0,value:new Uint8Array([n.type,n.note,n.velocity])},timeStamp:{enumerable:!0,value:n.timestamp}})}}function O(e){return e.type===window.Windows.Devices.Midi.MidiMessageType.systemExclusive}class T extends Map{constructor(){super()}}if(window.Windows){var D=window.Windows.Devices.Midi,_=D.MidiMessageType,M={};Object.keys(_).forEach(e=>M[_[e]]=e)}class A extends w{constructor(e,t){super(e),Object.defineProperties(this,{send:{enumerable:!0,value:function(e,t,n){function o(e){let o,r=(e=window.Uint8Array.from(e)).subarray(1),i=e[0];if(!(i in M))throw new Error(`TypeError - ${i} is not a valid MIDI message type`);{let e=M[i].replace(/^\w/,e=>e.toUpperCase());o=D[`Midi${e}Message`](0,...r)}if(t.sendMessage(o),"disconnected"===n.state)throw new Error("InvalidStateError")}return Object.defineProperty(o,"toString",{value:"function send() { [native code] }"}),o}(0,t,this)},clear:{enumerable:!0,value:()=>{}}})}}class N extends Map{constructor(){super()}}const P=!("https:"===location.protocol||"wss:"===location.protocol||"file:"===location.protocol||"localhost"===location.hostname||/^127(?:\.[0-9]+){0,2}\.[0-9]+$/.test(location.host)||/^\[(?:0*\:)*?:?0*1]/.test(location.host));var x=n(0);function S(e){return new Promise((t,n)=>{Promise.all([async function(e){let t=window.Windows.Devices.Midi,n=t.MidiInPort.getDeviceSelector(),o=await window.Windows.Devices.Enumeration.DeviceInformation.findAllAsync(n,null),r=new T;for(let n=0;n<o.length;n++){let i=o[n],s=await t.MidiInPort.fromIdAsync(i.id),a=new I(i);s.addEventListener("messagereceived",t=>{if(!e.sysex||!O(t.message)){let e=R("midimessage",{},t.message);a.dispatchEvent(e)}}),r.set(i.id,a)}return r}(e),async function(){let e=window.Windows.Devices.Midi.MidiOutPort.getDeviceSelector(),t=await window.Windows.Devices.Enumeration.DeviceInformation.findAllAsync(e,null),n=new N;for(let e=0;e<t.length;e++){let o=t[e],r=await window.Windows.Devices.Midi.MidiOutPort.fromIdAsync(o.id),i=new A(o,r);n.set(o.id,i)}return n}()]).then(e=>{let[n,o]=e;class r extends h{constructor(e={}){if(super(),e.sysex&&P)throw new x.DOMException("sysex was requested on a unsecure page, breaking policy.");Object.defineProperties(this,{inputs:{enumerable:!0,value:n},outputs:{enumerable:!0,value:o},sysexEnabled:{enumerable:!0,value:e.sysex||!1},toString:{value:()=>"function MIDIAccess() { [native code] }",enumerable:!1}})}}g(r.prototype,"statechange"),t(r)})})}function j(e){e(new x.DOMException("AbortError"))}let C=()=>{if(!("requestMIDIAccess"in navigator)){!function(e=self){[{name:"MIDIAccess",proto:EventTarget},{name:"MIDIPort",proto:EventTarget},{name:"MIDIInput"},{name:"MIDIOutput"},{name:"MIDIInputMap",proto:()=>{}},{name:"MIDIOutputMap",proto:()=>{}}].forEach(function(t){e[t.name]=function(){throw"Function expected"},t.proto&&Object.setPrototypeOf(e[t.name],t.proto),Object.defineProperty(e[t.name],"toString",{get:()=>`function ${t.name}() { [native code] }`})}),Object.setPrototypeOf(e.MIDIInput,e.MIDIPort),Object.setPrototypeOf(e.MIDIOutput,e.MIDIPort),e.MIDIMessageEvent=R,e.MIDIConnectionEvent=y}();let e=e=>new Promise(async(t,n)=>{if(window.Windows.Devices.Midi){let o;window.addEventListener("beforeunload",()=>{j(n)});try{o=new(await S(e))(e)}catch(e){let t=new x.DOMException(`InvalidStateError - ${e.message}`);return n(t)}t(o),window.removeEventListener("beforeunload",()=>{j(n)})}else{let e;e="NotSupportedError",n(new x.DOMException(e))}});Object.defineProperty(e,"toString",{value:()=>"function requestMIDIAccess() { [native code] }"}),navigator.requestMIDIAccess=e}};window.Windows&&C(),navigator.requestMIDIAccess().then(function(e){console.log("MIDI ready!"),window.midi=e,e.inputs.get("input-1")},function(e){console.log("Failed to get MIDI access - "+e)})}]);